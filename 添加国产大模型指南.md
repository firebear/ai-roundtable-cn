# å¦‚ä½•ä¸ºAIåœ†æ¡Œæ·»åŠ å›½äº§å¤§æ¨¡å‹æ”¯æŒ

## ğŸ“š ä»£ç ç»“æ„åˆ†æ

### æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

```
ai-roundtable-cn/
â”œâ”€â”€ manifest.json          # Chromeæ‰©å±•é…ç½®æ–‡ä»¶ï¼ˆæœ€é‡è¦ï¼ï¼‰
â”œâ”€â”€ background.js          # åå°æœåŠ¡ï¼Œå¤„ç†æ¶ˆæ¯è·¯ç”±
â”œâ”€â”€ content/               # å„AIå¹³å°çš„content script
â”‚   â”œâ”€â”€ claude.js         # Claude AIå¹³å°é€‚é…
â”‚   â”œâ”€â”€ chatgpt.js        # ChatGPTå¹³å°é€‚é…
â”‚   â””â”€â”€ gemini.js         # Geminiå¹³å°é€‚é…
â”œâ”€â”€ sidepanel/            # ä¾§è¾¹æ UI
â”‚   â”œâ”€â”€ panel.html
â”‚   â”œâ”€â”€ panel.css
â”‚   â””â”€â”€ panel.js          # æ§åˆ¶é€»è¾‘ï¼ˆéœ€è¦æ›´æ–°AIåˆ—è¡¨ï¼‰
â””â”€â”€ icons/               # å›¾æ ‡èµ„æº
```

### Content Script æ ¸å¿ƒåŠŸèƒ½

æ¯ä¸ªAIå¹³å°çš„content scriptï¼ˆå¦‚ `claude.js`ã€`chatgpt.js`ï¼‰éœ€è¦å®ç°ï¼š

1. **INJECT_MESSAGE** - æ³¨å…¥æ¶ˆæ¯åˆ°AIè¾“å…¥æ¡†
2. **GET_LATEST_RESPONSE** - è·å–AIçš„æœ€æ–°å›å¤
3. **CONTENT_SCRIPT_READY** - é€šçŸ¥backgroundè„šæœ¬å·²å°±ç»ª
4. **å“åº”æ•è·** - ç›‘å¬å¹¶ä¿å­˜AIçš„å›å¤å†…å®¹

---

## ğŸ¯ æ·»åŠ æ–°AIå¹³å°çš„æ­¥éª¤

### ç¬¬1æ­¥ï¼šåˆ›å»ºæ–°çš„content scriptæ–‡ä»¶

åœ¨ `content/` ç›®å½•ä¸‹åˆ›å»ºæ–°æ–‡ä»¶ï¼Œä¾‹å¦‚ `deepseek.js`

**æ–‡ä»¶æ¨¡æ¿ï¼š**

```javascript
// AI Panel - DeepSeek Content Script

(function() {
  'use strict';

  const AI_TYPE = 'deepseek';  // å¹³å°æ ‡è¯†

  // ... å…¶ä½™ä»£ç å‚è€ƒ claude.js æˆ– chatglm.js ...
})();
```

### ç¬¬2æ­¥ï¼šä¿®æ”¹ manifest.json

æ·»åŠ æ–°çš„hostæƒé™å’Œcontent scriptï¼š

```json
{
  "host_permissions": [
    // ... ç°æœ‰æƒé™ ...
    "https://chat.deepseek.com/*"  // æ·»åŠ æ–°AIå¹³å°åŸŸå
  ],

  "content_scripts": [
    // ... ç°æœ‰scripts ...
    {
      "matches": ["https://chat.deepseek.com/*"],
      "js": ["content/deepseek.js"],
      "run_at": "document_idle"
    }
  ]
}
```

### ç¬¬3æ­¥ï¼šæ›´æ–° sidepanel/panel.js

åœ¨AIåˆ—è¡¨ä¸­æ·»åŠ æ–°å¹³å°ï¼ˆéœ€è¦æŸ¥çœ‹panel.jsçš„AI_TYPEå¸¸é‡å®šä¹‰ï¼‰

### ç¬¬4æ­¥ï¼šæµ‹è¯•

1. åœ¨Chromeä¸­åŠ è½½æ›´æ–°åçš„æ’ä»¶
2. è®¿é—®æ–°AIå¹³å°çš„ç½‘ç«™
3. æµ‹è¯•æ¶ˆæ¯æ³¨å…¥å’Œå“åº”æ•è·

---

## ğŸ” å…³é”®å®ç°è¦ç‚¹

### 1. è¾“å…¥æ¡†é€‰æ‹©å™¨

ä¸åŒAIå¹³å°ä½¿ç”¨ä¸åŒçš„HTMLç»“æ„ï¼Œéœ€è¦æ‰¾åˆ°æ­£ç¡®çš„é€‰æ‹©å™¨ï¼š

```javascript
const inputSelectors = [
  'textarea[placeholder*="è¾“å…¥"]',    // æŒ‰placeholderæ–‡æœ¬
  'div[contenteditable="true"]',      // contenteditable div
  'textarea[class*="input"]',         // æŒ‰classååŒ¹é…
  'textarea'                          // é€šç”¨textarea
];
```

### 2. å‘é€æŒ‰é’®å®šä½

```javascript
function findSendButton() {
  const selectors = [
    'button[aria-label="Send message"]',
    'button[type="submit"]',
    'div[class*="send"]',  // æœ‰äº›å¹³å°ç”¨div
    'svg[class*="send"]'   // æœ‰äº›å¹³å°ç”¨SVGå›¾æ ‡
  ];

  for (const selector of selectors) {
    const btn = document.querySelector(selector);
    if (btn && isVisible(btn)) return btn;
  }
  return null;
}
```

### 3. å“åº”æ•è·

```javascript
function setupResponseObserver() {
  // ä½¿ç”¨MutationObserverç›‘å¬DOMå˜åŒ–
  const observer = new MutationObserver((mutations) => {
    // æ£€æµ‹æ–°çš„å›å¤å†…å®¹
  });

  observer.observe(document.body, {
    childList: true,
    subtree: true
  });
}
```

---

## ğŸ“ å›½äº§å¤§æ¨¡å‹å¹³å°ä¿¡æ¯

### å¸¸è§å›½äº§å¤§æ¨¡å‹åŸŸå

| AIæ¨¡å‹ | åŸŸå | å¤‡æ³¨ |
|--------|------|------|
| DeepSeek | https://chat.deepseek.com | æ·±åº¦æ±‚ç´¢ |
| Kimi | https://kimi.moonshot.cn | æœˆä¹‹æš—é¢ |
| é€šä¹‰åƒé—® | https://www.qianwen.com | é˜¿é‡Œäº‘ |
| æ–‡å¿ƒä¸€è¨€ | https://yiyan.baidu.com | ç™¾åº¦ |
| ChatGLM | https://chatglm.cn | æ™ºè°±AI |
| ç™¾å· | https://www.baichuan-ai.com | ç™¾å·æ™ºèƒ½ |
| æ˜Ÿç« | https://xinghuo.xfyun.cn | ç§‘å¤§è®¯é£ |

---

## ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œ

1. **é€‰æ‹©ä¸€ä¸ªAIå¹³å°**å¼€å§‹å®ç°ï¼ˆæ¨èä»DeepSeekå¼€å§‹ï¼‰
2. **åˆ›å»ºå¯¹åº”çš„.jsæ–‡ä»¶**å¹¶å®ç°æ ¸å¿ƒåŠŸèƒ½
3. **ä¿®æ”¹manifest.json**æ·»åŠ æƒé™
4. **æµ‹è¯•éªŒè¯**
5. **æäº¤åˆ°GitHub**

---

## ğŸ’¡ è°ƒè¯•æŠ€å·§

### Chrome DevToolsè°ƒè¯•

1. æ‰“å¼€AIå¹³å°ç½‘ç«™
2. æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·
3. åœ¨Consoleä¸­æŸ¥çœ‹ `[AI Panel]` å‰ç¼€çš„æ—¥å¿—
4. ä½¿ç”¨Elementsé¢æ¿æ£€æŸ¥DOMç»“æ„ï¼Œæ‰¾åˆ°æ­£ç¡®çš„é€‰æ‹©å™¨

### å¸¸è§é—®é¢˜

- **æ‰¾ä¸åˆ°è¾“å…¥æ¡†**ï¼šæ£€æŸ¥é€‰æ‹©å™¨æ˜¯å¦æ­£ç¡®
- **å‘é€å¤±è´¥**ï¼šæ£€æŸ¥æŒ‰é’®é€‰æ‹©å™¨å’Œç‚¹å‡»äº‹ä»¶
- **æ— æ³•æ•è·å“åº”**ï¼šæ£€æŸ¥MutationObserverçš„é…ç½®

---

## ğŸ“š å‚è€ƒèµ„æº

- [åŸå§‹AIåœ†æ¡Œé¡¹ç›®](https://github.com/axtonliu/ai-roundtable)
- [ChatGLMå®ç°å‚è€ƒ](https://github.com/sunnybug/ai-roundtable)
- [Chromeæ‰©å±•å¼€å‘æ–‡æ¡£](https://developer.chrome.com/docs/extensions/)
